#!/usr/bin/env bash

set -euo pipefail
home="$(realpath "$(realpath "${BASH_SOURCE[0]}" | xargs dirname)"/..)"
cd "$home"
# pwd

grey='\x1b[38;05;240m'
blue='\x1b[38;05;27m'
lime='\x1b[38;05;118m'
orange='\x1b[38;05;208m'
red='\x1b[38;05;124m'
reset='\x1b[0m'
function info () { set +u;  printf "$grey""SQLISH ""$blue%s$reset\n" "$1 $2 $3 $4 $5 $6"; set -u; }
function help () { set +u;  printf "$grey""SQLISH ""$lime%s$reset\n" "$1 $2 $3 $4 $5 $6"; set -u; }
function urge () { set +u;  printf "$grey""SQLISH ""$orange%s$reset\n" "$1 $2 $3 $4 $5 $6"; set -u; }
function warn () { set +u;  printf "$grey""SQLISH ""$red%s$reset\n" "$1 $2 $3 $4 $5 $6"; set -u; }

# info 'intershop command '"$0" "$@"

nearleyc src/sqlish-grammar.ne -o src/sqlish-grammar.coffee
coffee -o lib -c src/sqlish-grammar.coffee
nearley-test -q -i 'set debug to true;' lib/sqlish-grammar.js
